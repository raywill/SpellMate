<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>i18n éªŒè¯</title>
    <script src="../i18n.js"></script>
    <style>
        body { font-family: monospace; padding: 20px; background: #1f2937; color: #f3f4f6; }
        .ok { color: #10b981; }
        .warn { color: #f59e0b; }
        .error { color: #ef4444; }
        pre { background: #111827; padding: 10px; border-radius: 4px; }
        h2 { color: #60a5fa; }
    </style>
</head>
<body>
    <h1>ğŸ” i18n ç¿»è¯‘å®Œæ•´æ€§æ£€æŸ¥</h1>
    <div id="result"></div>
    
    <script>
        const requiredKeys = [
            'appTitle', 'startRecording', 'stopRecording', 'startDictation', 'pauseDictation',
            'statusReady', 'statusRecording', 'statusProcessing', 'statusComplete', 'statusRestored',
            'statusRestoredWithProgress', 'statusNoSegments', 'statusInterrupted',
            'visualizerLabel', 'voiceControlTitle', 'voiceControlOff', 'voiceControlListening', 'voiceControlWaiting',
            'commandsTitle', 'commandStart', 'commandNext', 'commandReplay', 'commandPrevious',
            'settingsTitle', 'settingSilence', 'settingVolume', 'settingLanguage',
            'segmentsTitle', 'playButton', 'secondUnit', 'emptyState',
            'alertNeedRecording', 'alertMicPermission', 'alertRecordingInterrupted', 'alertStorageFull', 'alertStorageFullWithUsable',
            'errorSpeechNotSupported', 'errorSpeechServiceAbnormal', 'errorMicPermissionDenied', 'errorNetworkIssue', 'errorRecognition',
            'wechatTitle', 'wechatText', 'wechatStep1', 'wechatStep2', 'wechatSupport'
        ];

        const languages = Object.keys(i18n.translations);
        let output = `<h2>ç¿»è¯‘é”®æ£€æŸ¥ (${requiredKeys.length} ä¸ªå¿…éœ€é”®)</h2>`;
        let hasIssues = false;

        languages.forEach(lang => {
            const translations = i18n.translations[lang];
            const missing = requiredKeys.filter(key => !(key in translations));
            const existing = Object.keys(translations);
            const extra = existing.filter(key => !requiredKeys.includes(key));
            
            output += `<h3>${lang.toUpperCase()} - ${i18n.languages[lang].name} ${i18n.languages[lang].flag}</h3>`;
            
            if (missing.length === 0 && extra.length === 0) {
                output += `<div class="ok">âœ… å®Œç¾ï¼åŒ…å«æ‰€æœ‰ ${existing.length} ä¸ªé”®</div>`;
            } else {
                if (missing.length > 0) {
                    output += `<div class="error">âŒ ç¼ºå°‘ ${missing.length} ä¸ªé”®:</div>`;
                    output += `<pre>${missing.join('\n')}</pre>`;
                    hasIssues = true;
                }
                if (extra.length > 0) {
                    output += `<div class="warn">âš ï¸ å¤šä½™ ${extra.length} ä¸ªé”®:</div>`;
                    output += `<pre>${extra.join('\n')}</pre>`;
                    hasIssues = true;
                }
            }
        });

        // æ£€æŸ¥è¯­éŸ³å‘½ä»¤
        output += '<h2>è¯­éŸ³å‘½ä»¤æ£€æŸ¥</h2>';
        const requiredCommandKeys = ['next', 'replay', 'previous'];

        languages.forEach(lang => {
            const commands = i18n.voiceCommands[lang];
            output += `<h3>${lang.toUpperCase()}</h3>`;
            
            if (!commands) {
                output += `<div class="error">âŒ ç¼ºå°‘è¯­éŸ³å‘½ä»¤é…ç½®</div>`;
                hasIssues = true;
            } else {
                const missing = requiredCommandKeys.filter(key => !commands[key] || commands[key].length === 0);
                if (missing.length > 0) {
                    output += `<div class="error">âŒ ç¼ºå°‘å‘½ä»¤: ${missing.join(', ')}</div>`;
                    hasIssues = true;
                } else {
                    output += `<div class="ok">âœ… next: ${commands.next.length}, replay: ${commands.replay.length}, previous: ${commands.previous.length}</div>`;
                }
            }
        });

        if (!hasIssues) {
            output += '<h2 class="ok">ğŸ‰ æ‰€æœ‰è¯­è¨€ç¿»è¯‘å®Œæ•´ä¸”ä¸€è‡´ï¼</h2>';
        } else {
            output += '<h2 class="warn">âš ï¸ å‘ç°ä¸ä¸€è‡´</h2>';
        }

        document.getElementById('result').innerHTML = output;
    </script>
</body>
</html>

